name: Test Secrets en CI/CD

on:
  push:
    branches:
      - main

jobs:
  test_secrets:
    runs-on: ubuntu-latest
    env:
      # On récupère la clé depuis GitHub Secrets
      API_KEY: ${{ secrets.API_KEY }}

    steps:
      - name: Cloner le dépôt
        uses: actions/checkout@v4

      - name: Afficher si la clé API existe (sans la dévoiler)
        run: |
          if [ -z "$API_KEY" ]; then
            echo "❌ Clé API non trouvée !"
            exit 1
          else
            echo "✅ Clé API détectée (mais non affichée pour sécurité)."
          fi

      - name: Exemple d'utilisation de la clé (simulation)
        run: |
          echo "Appel API sécurisé avec la clé : ********"
